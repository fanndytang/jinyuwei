{"version":3,"sources":["webpack:///5.6676fb8.js","webpack:///./src/pages/advert.vue","webpack:///./src/pages/advert.vue?70e0","webpack:///advert.vue"],"names":["webpackJsonp","421","module","__webpack_exports__","__webpack_require__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_13_0_0_vue_loader_lib_selector_type_script_index_0_advert_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_13_0_0_vue_loader_lib_selector_type_script_index_0_advert_vue___default","n","__WEBPACK_IMPORTED_MODULE_1__node_modules_13_0_0_vue_loader_lib_template_compiler_index_id_data_v_1af2ab98_node_modules_13_0_0_vue_loader_lib_selector_type_template_index_0_advert_vue__","normalizeComponent","Component","a","440","render","_vm","this","_h","$createElement","_c","_self","_v","isAdd","_e","staticStyle","margin","on","click","$event","width","attrs","data","list","border","prop","label","scopedSlots","_u","key","fn","scope","type","size","updateAdvert","$index","_id","deleteAdvert","ref","rules","model","ruleForm","label-width","callback","$$v","group","expression","link","target","sort","content","staticClass","action","show-file-list","on-success","handleAvatarSuccess","before-upload","beforeAvatarUpload","src","images","directives","name","rawName","domProps","input","composing","imagesid","addAdvert","resetForm","staticRenderFns","457","exports","_main","_main2","obj","__esModule","default","required","message","trigger","layout","mounted","getAdvert","methods","self","$http","get","then","JSON","parse","request","response","compare","id","index","post","splice","formName","window","location","reload","res","file","URL","createObjectURL","raw","isJPG","isPNG","isGif","isLt2M","$message","error"],"mappings":"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","file":"5.6676fb8.js","sourcesContent":["webpackJsonp([5],{\n\n/***/ 421:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_13_0_0_vue_loader_lib_selector_type_script_index_0_advert_vue__ = __webpack_require__(457);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_13_0_0_vue_loader_lib_selector_type_script_index_0_advert_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_13_0_0_vue_loader_lib_selector_type_script_index_0_advert_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_13_0_0_vue_loader_lib_template_compiler_index_id_data_v_1af2ab98_node_modules_13_0_0_vue_loader_lib_selector_type_template_index_0_advert_vue__ = __webpack_require__(440);\nvar normalizeComponent = __webpack_require__(55)\n/* script */\n\n/* template */\n\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_13_0_0_vue_loader_lib_selector_type_script_index_0_advert_vue___default.a,\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_13_0_0_vue_loader_lib_template_compiler_index_id_data_v_1af2ab98_node_modules_13_0_0_vue_loader_lib_selector_type_template_index_0_advert_vue__[\"a\" /* default */],\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ 440:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('h1', [_vm._v(\"广告管理\")]), _vm._v(\" \"), (!_vm.isAdd) ? _c('el-button', {\n    staticStyle: {\n      \"margin\": \"20px 0\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.isAdd = true\n      }\n    }\n  }, [_vm._v(\"添加\")]) : _vm._e(), _vm._v(\" \"), (!_vm.isAdd) ? _c('el-table', {\n    staticStyle: {\n      \"width\": \"100%\"\n    },\n    attrs: {\n      \"data\": _vm.list,\n      \"border\": \"\"\n    }\n  }, [_c('el-table-column', {\n    attrs: {\n      \"prop\": \"group\",\n      \"label\": \"所属组\",\n      \"width\": \"180\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"link\",\n      \"label\": \"链接\",\n      \"width\": \"180\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"target\",\n      \"label\": \"是否新窗口\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"sort\",\n      \"label\": \"序号\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"content\",\n      \"label\": \"描述\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"image\",\n      \"label\": \"广告图\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"label\": \"操作\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('el-button', {\n          attrs: {\n            \"type\": \"text\",\n            \"size\": \"small\"\n          },\n          on: {\n            \"click\": function($event) {\n              _vm.updateAdvert(_vm.list[scope.$index]._id, scope.$index)\n            }\n          }\n        }, [_vm._v(\"修改\")]), _vm._v(\" \"), _c('el-button', {\n          attrs: {\n            \"type\": \"text\",\n            \"size\": \"small\"\n          },\n          on: {\n            \"click\": function($event) {\n              _vm.deleteAdvert(_vm.list[scope.$index]._id, scope.$index)\n            }\n          }\n        }, [_vm._v(\"删除\")])]\n      }\n    }])\n  })], 1) : _vm._e(), _vm._v(\" \"), (_vm.isAdd) ? _c('el-form', {\n    ref: \"form\",\n    staticStyle: {\n      \"width\": \"80%\"\n    },\n    attrs: {\n      \"rules\": _vm.rules,\n      \"model\": _vm.ruleForm,\n      \"label-width\": \"120px\"\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"所属组\",\n      \"prop\": \"group\"\n    }\n  }, [_c('el-input', {\n    model: {\n      value: (_vm.ruleForm.group),\n      callback: function($$v) {\n        _vm.ruleForm.group = $$v\n      },\n      expression: \"ruleForm.group\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"链接\",\n      \"prop\": \"link\"\n    }\n  }, [_c('el-input', {\n    model: {\n      value: (_vm.ruleForm.link),\n      callback: function($$v) {\n        _vm.ruleForm.link = $$v\n      },\n      expression: \"ruleForm.link\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"是否新窗口\"\n    }\n  }, [_c('el-radio-group', {\n    model: {\n      value: (_vm.ruleForm.target),\n      callback: function($$v) {\n        _vm.ruleForm.target = $$v\n      },\n      expression: \"ruleForm.target\"\n    }\n  }, [_c('el-radio', {\n    attrs: {\n      \"label\": \"是\"\n    }\n  }), _vm._v(\" \"), _c('el-radio', {\n    attrs: {\n      \"label\": \"否\"\n    }\n  })], 1)], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"序号\",\n      \"prop\": \"sort\"\n    }\n  }, [_c('el-input', {\n    model: {\n      value: (_vm.ruleForm.sort),\n      callback: function($$v) {\n        _vm.ruleForm.sort = $$v\n      },\n      expression: \"ruleForm.sort\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"描述\",\n      \"prop\": \"content\"\n    }\n  }, [_c('el-input', {\n    model: {\n      value: (_vm.ruleForm.content),\n      callback: function($$v) {\n        _vm.ruleForm.content = $$v\n      },\n      expression: \"ruleForm.content\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"广告图\"\n    }\n  }, [_c('el-upload', {\n    staticClass: \"avatar-uploader\",\n    attrs: {\n      \"action\": \"http://127.0.0.1:8360/api/upload/image\",\n      \"show-file-list\": false,\n      \"on-success\": _vm.handleAvatarSuccess,\n      \"before-upload\": _vm.beforeAvatarUpload\n    }\n  }, [(_vm.ruleForm.images) ? _c('img', {\n    staticClass: \"avatar\",\n    attrs: {\n      \"src\": _vm.ruleForm.images\n    }\n  }) : _c('i', {\n    staticClass: \"el-icon-plus avatar-uploader-icon\"\n  })]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.ruleForm.imagesid),\n      expression: \"ruleForm.imagesid\"\n    }],\n    attrs: {\n      \"type\": \"hidden\"\n    },\n    domProps: {\n      \"value\": (_vm.ruleForm.imagesid)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.ruleForm.imagesid = $event.target.value\n      }\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', [_c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.addAdvert('form')\n      }\n    }\n  }, [_vm._v(\"确定\")]), _vm._v(\" \"), _c('el-button', {\n    on: {\n      \"click\": function($event) {\n        _vm.resetForm('form')\n      }\n    }\n  }, [_vm._v(\"重置\")])], 1)], 1) : _vm._e()], 1)\n}\nvar staticRenderFns = []\n/* harmony default export */ __webpack_exports__[\"a\"] = ({ render: render, staticRenderFns: staticRenderFns });\n\n/***/ }),\n\n/***/ 457:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _main = __webpack_require__(148);\n\nvar _main2 = _interopRequireDefault(_main);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  data: function data() {\n    return {\n      list: [],\n      isAdd: false,\n      ruleForm: {\n        group: '',\n        link: '',\n        target: '是',\n        sort: '',\n        images: '',\n        imagesid: '',\n        content: ''\n      },\n      rules: {\n        group: [{ required: true, message: '', trigger: 'blur' }],\n        link: [{ required: true, message: '', trigger: 'blur' }],\n        target: [{ required: true, message: '', trigger: 'blur' }],\n        sort: [{ required: true, message: '', trigger: 'blur' }],\n        content: [{ required: true, message: '', trigger: 'blur' }]\n      }\n    };\n  },\n\n  layout: 'admin',\n  mounted: function mounted() {\n    this.getAdvert();\n  },\n\n  methods: {\n    getAdvert: function getAdvert() {\n      var self = this;\n      self.$http.get('/api/advert/list').then(function (data) {\n        self.list = JSON.parse(data.request.response).data.sort(_main2.default.compare('sort'));\n      });\n    },\n    deleteAdvert: function deleteAdvert(id, index) {\n      var self = this;\n      self.$http.post('/api/advert/delete', {\n        id: id\n      }).then(function (data) {\n        self.list.splice(index, 1);\n      });\n    },\n    updateAdvert: function updateAdvert(id, index) {\n      var self = this;\n      self.$http.post('/api/advert/update', {\n        id: id,\n        group: self.ruleForm.group,\n        link: self.ruleForm.link,\n        sort: self.ruleForm.sort,\n        content: self.ruleForm.content,\n        target: self.ruleForm.target,\n        imagesid: self.ruleForm.imagesid\n      }).then(function (data) {\n        self.list.splice(index, 1, JSON.parse(data.request.response).data);\n      });\n    },\n    addAdvert: function addAdvert(formName) {\n      var self = this;\n      self.$http.post('/api/advert/add', {\n        group: self.ruleForm.group,\n        link: self.ruleForm.link,\n        sort: self.ruleForm.sort,\n        content: self.ruleForm.content,\n        target: self.ruleForm.target,\n        imagesid: self.ruleForm.imagesid\n      }).then(function (data) {\n        window.location.reload();\n      });\n    },\n    handleAvatarSuccess: function handleAvatarSuccess(res, file) {\n      this.ruleForm.images = URL.createObjectURL(file.raw);\n      this.ruleForm.imagesid = res.data.data.file._id;\n    },\n    beforeAvatarUpload: function beforeAvatarUpload(file) {\n      var isJPG = file.type === 'image/jpeg';\n      var isPNG = file.type === 'image/png';\n      var isGif = file.type === 'image/gif';\n      var isLt2M = file.size / 1024 / 1024 < 2;\n      if (!isJPG && !isPNG && !isGif) {\n        this.$message.error('上传图片格式只允许jpg, png, gif');\n      }\n      if (!isLt2M) {\n        this.$message.error('上传头像图片大小不能超过 2MB!');\n      }\n      return isJPG && isLt2M;\n    }\n  }\n};\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 5.6676fb8.js","var normalizeComponent = require(\"!../../node_modules/.13.0.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/.13.0.0@vue-loader/lib/selector?type=script&index=0!./advert.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/.13.0.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1af2ab98\\\"}!../../node_modules/.13.0.0@vue-loader/lib/selector?type=template&index=0!./advert.vue\"\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/advert.vue\n// module id = 421\n// module chunks = 5","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('h1', [_vm._v(\"广告管理\")]), _vm._v(\" \"), (!_vm.isAdd) ? _c('el-button', {\n    staticStyle: {\n      \"margin\": \"20px 0\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.isAdd = true\n      }\n    }\n  }, [_vm._v(\"添加\")]) : _vm._e(), _vm._v(\" \"), (!_vm.isAdd) ? _c('el-table', {\n    staticStyle: {\n      \"width\": \"100%\"\n    },\n    attrs: {\n      \"data\": _vm.list,\n      \"border\": \"\"\n    }\n  }, [_c('el-table-column', {\n    attrs: {\n      \"prop\": \"group\",\n      \"label\": \"所属组\",\n      \"width\": \"180\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"link\",\n      \"label\": \"链接\",\n      \"width\": \"180\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"target\",\n      \"label\": \"是否新窗口\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"sort\",\n      \"label\": \"序号\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"content\",\n      \"label\": \"描述\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"image\",\n      \"label\": \"广告图\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"label\": \"操作\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('el-button', {\n          attrs: {\n            \"type\": \"text\",\n            \"size\": \"small\"\n          },\n          on: {\n            \"click\": function($event) {\n              _vm.updateAdvert(_vm.list[scope.$index]._id, scope.$index)\n            }\n          }\n        }, [_vm._v(\"修改\")]), _vm._v(\" \"), _c('el-button', {\n          attrs: {\n            \"type\": \"text\",\n            \"size\": \"small\"\n          },\n          on: {\n            \"click\": function($event) {\n              _vm.deleteAdvert(_vm.list[scope.$index]._id, scope.$index)\n            }\n          }\n        }, [_vm._v(\"删除\")])]\n      }\n    }])\n  })], 1) : _vm._e(), _vm._v(\" \"), (_vm.isAdd) ? _c('el-form', {\n    ref: \"form\",\n    staticStyle: {\n      \"width\": \"80%\"\n    },\n    attrs: {\n      \"rules\": _vm.rules,\n      \"model\": _vm.ruleForm,\n      \"label-width\": \"120px\"\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"所属组\",\n      \"prop\": \"group\"\n    }\n  }, [_c('el-input', {\n    model: {\n      value: (_vm.ruleForm.group),\n      callback: function($$v) {\n        _vm.ruleForm.group = $$v\n      },\n      expression: \"ruleForm.group\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"链接\",\n      \"prop\": \"link\"\n    }\n  }, [_c('el-input', {\n    model: {\n      value: (_vm.ruleForm.link),\n      callback: function($$v) {\n        _vm.ruleForm.link = $$v\n      },\n      expression: \"ruleForm.link\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"是否新窗口\"\n    }\n  }, [_c('el-radio-group', {\n    model: {\n      value: (_vm.ruleForm.target),\n      callback: function($$v) {\n        _vm.ruleForm.target = $$v\n      },\n      expression: \"ruleForm.target\"\n    }\n  }, [_c('el-radio', {\n    attrs: {\n      \"label\": \"是\"\n    }\n  }), _vm._v(\" \"), _c('el-radio', {\n    attrs: {\n      \"label\": \"否\"\n    }\n  })], 1)], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"序号\",\n      \"prop\": \"sort\"\n    }\n  }, [_c('el-input', {\n    model: {\n      value: (_vm.ruleForm.sort),\n      callback: function($$v) {\n        _vm.ruleForm.sort = $$v\n      },\n      expression: \"ruleForm.sort\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"描述\",\n      \"prop\": \"content\"\n    }\n  }, [_c('el-input', {\n    model: {\n      value: (_vm.ruleForm.content),\n      callback: function($$v) {\n        _vm.ruleForm.content = $$v\n      },\n      expression: \"ruleForm.content\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"广告图\"\n    }\n  }, [_c('el-upload', {\n    staticClass: \"avatar-uploader\",\n    attrs: {\n      \"action\": \"http://127.0.0.1:8360/api/upload/image\",\n      \"show-file-list\": false,\n      \"on-success\": _vm.handleAvatarSuccess,\n      \"before-upload\": _vm.beforeAvatarUpload\n    }\n  }, [(_vm.ruleForm.images) ? _c('img', {\n    staticClass: \"avatar\",\n    attrs: {\n      \"src\": _vm.ruleForm.images\n    }\n  }) : _c('i', {\n    staticClass: \"el-icon-plus avatar-uploader-icon\"\n  })]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.ruleForm.imagesid),\n      expression: \"ruleForm.imagesid\"\n    }],\n    attrs: {\n      \"type\": \"hidden\"\n    },\n    domProps: {\n      \"value\": (_vm.ruleForm.imagesid)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.ruleForm.imagesid = $event.target.value\n      }\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', [_c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.addAdvert('form')\n      }\n    }\n  }, [_vm._v(\"确定\")]), _vm._v(\" \"), _c('el-button', {\n    on: {\n      \"click\": function($event) {\n        _vm.resetForm('form')\n      }\n    }\n  }, [_vm._v(\"重置\")])], 1)], 1) : _vm._e()], 1)\n}\nvar staticRenderFns = []\nexport default { render: render, staticRenderFns: staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.13.0.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-1af2ab98\"}!./~/.13.0.0@vue-loader/lib/selector.js?type=template&index=0!./src/pages/advert.vue\n// module id = 440\n// module chunks = 5","<template>\n  <div>\n    <h1>广告管理</h1>\n    <el-button v-on:click=\"isAdd = true\" v-if=\"!isAdd\" style=\"margin: 20px 0;\">添加</el-button>\n    <el-table\n      v-if=\"!isAdd\"\n      :data=\"list\"\n      border\n      style=\"width: 100%\">\n      <el-table-column\n        prop=\"group\"\n        label=\"所属组\"\n        width=\"180\">\n      </el-table-column>\n      <el-table-column\n        prop=\"link\"\n        label=\"链接\"\n        width=\"180\">\n      </el-table-column>\n      <el-table-column\n        prop=\"target\"\n        label=\"是否新窗口\">\n      </el-table-column>\n      <el-table-column\n        prop=\"sort\"\n        label=\"序号\">\n      </el-table-column>\n      <el-table-column\n        prop=\"content\"\n        label=\"描述\">\n      </el-table-column>\n      <el-table-column\n        prop=\"image\"\n        label=\"广告图\">\n      </el-table-column>\n      <el-table-column\n        label=\"操作\">\n        <template scope=\"scope\">\n          <el-button @click=\"updateAdvert(list[scope.$index]._id, scope.$index)\" type=\"text\" size=\"small\">修改</el-button>\n          <el-button @click=\"deleteAdvert(list[scope.$index]._id, scope.$index)\" type=\"text\" size=\"small\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <el-form v-if=\"isAdd\" v-cloak :rules=\"rules\" ref=\"form\" :model=\"ruleForm\" label-width=\"120px\" style=\"width: 80%\">\n      <el-form-item label=\"所属组\" prop=\"group\">\n        <el-input v-model=\"ruleForm.group\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"链接\" prop=\"link\">\n        <el-input v-model=\"ruleForm.link\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"是否新窗口\" >\n        <el-radio-group v-model=\"ruleForm.target\">\n          <el-radio label=\"是\"></el-radio>\n          <el-radio label=\"否\"></el-radio>\n        </el-radio-group>\n      </el-form-item>\n      <el-form-item label=\"序号\" prop=\"sort\">\n        <el-input v-model=\"ruleForm.sort\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"描述\" prop=\"content\">\n        <el-input v-model=\"ruleForm.content\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"广告图\">\n        <el-upload\n          class=\"avatar-uploader\"\n          action=\"http://127.0.0.1:8360/api/upload/image\"\n          :show-file-list=\"false\"\n          :on-success=\"handleAvatarSuccess\"\n          :before-upload=\"beforeAvatarUpload\">\n          <img v-if=\"ruleForm.images\" :src=\"ruleForm.images\" class=\"avatar\" />\n          <i class=\"el-icon-plus avatar-uploader-icon\" v-else></i>\n        </el-upload>\n        <input type=\"hidden\" v-model=\"ruleForm.imagesid\" />\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" v-on:click=\"addAdvert('form')\">确定</el-button>\n        <el-button v-on:click=\"resetForm('form')\">重置</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\n  import Main from '../plugins/main'\n\n  export default {\n    data () {\n      return {\n        list: [],\n        isAdd: false, // 是否要添加\n        ruleForm: {\n          group: '',\n          link: '',\n          target: '是',\n          sort: '',\n          images: '',\n          imagesid: '',\n          content: ''\n        },\n        rules: {\n          group: [\n            { required: true, message: '', trigger: 'blur' }\n          ],\n          link: [\n            { required: true, message: '', trigger: 'blur' }\n          ],\n          target: [\n            { required: true, message: '', trigger: 'blur' }\n          ],\n          sort: [\n            { required: true, message: '', trigger: 'blur' }\n          ],\n          content: [\n            { required: true, message: '', trigger: 'blur' }\n          ]\n        }\n      }\n    },\n    layout: 'admin',\n    mounted () {\n      this.getAdvert()\n    },\n    methods: {\n      getAdvert () {\n        let self = this\n        self.$http.get('/api/advert/list').then(data => {\n          self.list = JSON.parse(data.request.response).data.sort(Main.compare('sort'))\n        })\n      },\n      deleteAdvert (id, index) {\n        let self = this\n        self.$http.post('/api/advert/delete', {\n          id: id\n        }).then(data => {\n          self.list.splice(index, 1)\n        })\n      },\n      updateAdvert (id, index) {\n        let self = this\n        self.$http.post('/api/advert/update', {\n          id: id,\n          group: self.ruleForm.group,\n          link: self.ruleForm.link,\n          sort: self.ruleForm.sort,\n          content: self.ruleForm.content,\n          target: self.ruleForm.target,\n          imagesid: self.ruleForm.imagesid\n        }).then(data => {\n          self.list.splice(index, 1, JSON.parse(data.request.response).data)\n        })\n      },\n      addAdvert (formName) {\n        let self = this\n        self.$http.post('/api/advert/add', {\n          group: self.ruleForm.group,\n          link: self.ruleForm.link,\n          sort: self.ruleForm.sort,\n          content: self.ruleForm.content,\n          target: self.ruleForm.target,\n          imagesid: self.ruleForm.imagesid\n        }).then(data => {\n          window.location.reload()\n        })\n      },\n      handleAvatarSuccess (res, file) {\n        this.ruleForm.images = URL.createObjectURL(file.raw)\n        this.ruleForm.imagesid = res.data.data.file._id\n      },\n      beforeAvatarUpload (file) {\n        const isJPG = file.type === 'image/jpeg'\n        const isPNG = file.type === 'image/png'\n        const isGif = file.type === 'image/gif'\n        const isLt2M = file.size / 1024 / 1024 < 2\n        if (!isJPG && !isPNG && !isGif) {\n          this.$message.error('上传图片格式只允许jpg, png, gif')\n        }\n        if (!isLt2M) {\n          this.$message.error('上传头像图片大小不能超过 2MB!')\n        }\n        return isJPG && isLt2M\n      }\n    }\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// advert.vue?f46d3e54"],"sourceRoot":""}