webpackJsonp([2],{425:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(463),r=o.n(a),i=o(444),l=o(55),n=l(r.a,i.a,null,null,null);t.default=n.exports},428:function(e,t,o){t=e.exports=o(419)(),t.push([e.i,".ql-container .ql-editor{min-height:20em;max-height:25em}.el-form-item__content .ql-toolbar{line-height:24px}.avatar-uploader .el-upload{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden}.avatar-uploader .el-upload:hover{border-color:#20a0ff}.avatar-uploader-icon{font-size:28px;color:#8c939d;width:178px;height:178px;line-height:178px;text-align:center}.avatar{width:178px;height:178px;display:block}","",{version:3,sources:["/./src/pages/product/add.vue"],names:[],mappings:"AACA,yBAAyB,gBAAgB,eAAe,CACvD,AACD,mCAAmC,gBAAgB,CAClD,AACD,4BAA4B,0BAA0B,kBAAkB,eAAe,kBAAkB,eAAe,CACvH,AACD,kCAAkC,oBAAoB,CACrD,AACD,sBAAsB,eAAe,cAAc,YAAY,aAAa,kBAAkB,iBAAiB,CAC9G,AACD,QAAQ,YAAY,aAAa,aAAa,CAC7C",file:"add.vue",sourcesContent:["\n.ql-container .ql-editor{min-height:20em;max-height:25em\n}\n.el-form-item__content .ql-toolbar{line-height:24px\n}\n.avatar-uploader .el-upload{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden\n}\n.avatar-uploader .el-upload:hover{border-color:#20a0ff\n}\n.avatar-uploader-icon{font-size:28px;color:#8c939d;width:178px;height:178px;line-height:178px;text-align:center\n}\n.avatar{width:178px;height:178px;display:block\n}"],sourceRoot:"webpack://"}])},436:function(e,t,o){"use strict";function a(e){o(451)}Object.defineProperty(t,"__esModule",{value:!0});var r=o(464),i=o.n(r),l=o(441),n=o(55),s=a,u=n(i.a,l.a,s,null,null);t.default=u.exports},437:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(465),r=o.n(a),i=o(446),l=o(55),n=l(r.a,i.a,null,null,null);t.default=n.exports},441:function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-form",{ref:"form",staticStyle:{width:"80%"},attrs:{rules:e.rules,model:e.form,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"产品名称",prop:"title"}},[o("el-input",{model:{value:e.form.title,callback:function(t){e.form.title=t},expression:"form.title"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"简介",prop:"summary"}},[o("el-input",{model:{value:e.form.summary,callback:function(t){e.form.summary=t},expression:"form.summary"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"封面图",prop:"cover"}},[o("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/upload/image","show-file-list":!1,"on-error":e.upload.cover.failedUpload,"on-change":e.upload.cover.changeUpload,"on-success":e.upload.cover.successUpload,"before-upload":e.upload.cover.beforeUpload}},[e.upload.cover.src?o("img",{staticClass:"avatar",attrs:{src:e.upload.cover.src}}):o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e._v(" "),o("el-input",{staticStyle:{display:"none"},attrs:{type:"hidden"},model:{value:e.form.cover,callback:function(t){e.form.cover=t},expression:"form.cover"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"详情图",prop:"thumbs"}},[o("el-upload",{staticClass:"upload-demo",attrs:{action:"/api/upload/image","on-success":e.handleSuccess,"on-remove":e.handleRemove,"file-list":e.upload.thumbs,"list-type":"picture"}},[o("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),o("div",{staticClass:"el-upload__tip",slot:"tip"},[e._v("只能上传jpg/png/gif文件，且不超过500kb")])],1),e._v(" "),o("el-input",{staticStyle:{display:"none"},attrs:{type:"hidden"},model:{value:e.form.thumbs,callback:function(t){e.form.thumbs=t},expression:"form.thumbs"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"分类",prop:"category"}},[o("el-upload",{staticClass:"upload-demo",attrs:{action:"/api/upload/image","on-success":e.handleSuccess1,"on-remove":e.handleRemove1,"file-list":e.upload.category,"list-type":"picture"}},[o("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),o("div",{staticClass:"el-upload__tip",slot:"tip"},[e._v("只能上传jpg/png/gif文件，且不超过500kb")])],1),e._v(" "),o("el-input",{staticStyle:{display:"none"},attrs:{type:"hidden"},model:{value:e.form.category,callback:function(t){e.form.category=t},expression:"form.category"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"产品描述",prop:"content"}},[o("quill-editor",{ref:"myQuillEditor",attrs:{content:e.form.content,options:e.editorOption},model:{value:e.form.content,callback:function(t){e.form.content=t},expression:"form.content"}})],1),e._v(" "),o("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"产品价格",prop:"price"}},[o("el-input",{attrs:{type:"number",min:"0",max:"100",placeholder:"请输入价格"},model:{value:e.form.price,callback:function(t){e.form.price=t},expression:"form.price"}},[o("template",{slot:"append"},[e._v("元")])],2)],1),e._v(" "),o("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"产品抵扣",prop:"discount"}},[o("el-input",{attrs:{type:"number",min:"0",max:"100",placeholder:"请输入抵扣百分比"},model:{value:e.form.discount,callback:function(t){e.form.discount=t},expression:"form.discount"}},[o("template",{slot:"append"},[e._v("%")])],2)],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit("form")}}},[e._v("确定")]),e._v(" "),o("el-button",{on:{click:function(t){e.resetForm("form")}}},[e._v("重置")])],1)],1)},r=[];t.a={render:a,staticRenderFns:r}},444:function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("h1",[e._v("产品管理")]),e._v(" "),o("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isAdd,expression:"!isAdd"}],staticStyle:{margin:"20px 0"},on:{click:function(t){e.isAdd=!0}}},[e._v("添加")]),e._v(" "),o("proList",{directives:[{name:"show",rawName:"v-show",value:!e.isAdd,expression:"!isAdd"}]}),e._v(" "),o("proAdd",{directives:[{name:"show",rawName:"v-show",value:e.isAdd,expression:"isAdd"}]})],1)},r=[];t.a={render:a,staticRenderFns:r}},446:function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[o("el-table-column",{attrs:{prop:"title",label:"产品名称",width:"100"}}),e._v(" "),o("el-table-column",{attrs:{prop:"summary",label:"简介",width:"180"}}),e._v(" "),o("el-table-column",{attrs:{label:"封面图",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("img",{staticStyle:{"max-width":"100%","margin-top":"8px"},attrs:{src:e.list[t.$index].cover.path}})]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"price",label:"产品价格"}}),e._v(" "),o("el-table-column",{attrs:{prop:"discount",label:"产品抵扣"}}),e._v(" "),o("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("router-link",{attrs:{to:{path:"/home/detail",query:{id:e.list[t.$index]._id}}}},[o("span",{staticStyle:{"margin-right":"5px"}},[e._v("查看")])]),e._v(" "),o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){e.handleClick(e.list[t.$index]._id,t.$index)}}},[e._v("删除")]),e._v(" "),o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.$parent.isAdd=!0}}},[e._v("编辑")])]}}])})],1)},r=[];t.a={render:a,staticRenderFns:r}},451:function(e,t,o){var a=o(428);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);o(420)("40269e49",a,!0)},463:function(e,t,o){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(437),i=a(r),l=o(436),n=a(l);t.default={data:function(){return{isAdd:!1}},mounted:function(){},components:{proList:i.default,proAdd:n.default}}},464:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{upload:{cover:this.MyMain.setUpload(),thumbs:[],category:[]},form:{title:"",summary:"",cover:"",thumbs:"",category:"",content:"",price:"",discount:0},rules:{title:[{required:!0,message:"请输入产品名称",trigger:"blur"}],summary:[{required:!0,message:"请输入产品简介",trigger:"blur"}],cover:[{required:!0,message:"请上传封面图",trigger:"blur"}],thumbs:[{required:!1,message:"请上传详情图",trigger:"blur"}],category:[{required:!1,message:"请上传分类图",trigger:"blur"}],content:[{required:!0,message:"请输入产品描述",trigger:"blur"}],price:[{required:!0,message:"请输入产品价格",trigger:"blur"}]},editorOption:{}}},watch:{"upload.cover.fid":function(e){this.form.cover=e},"upload.thumbs":function(e){var t=[];for(var o in e)t[o]=e[o].fid;this.form.thumbs=t.join(",")},"upload.category":function(e){var t=[];for(var o in e)t[o]=e[o].fid;this.form.category=t.join(",")}},methods:{onSubmit:function(e){var t=this;t.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.$http.post("/api/product/add",t.form).then(function(e){t.$message({message:e.data.data.info,type:"success"}),window.location.reload()}).catch(function(){})})},resetForm:function(e){this.$refs[e].resetFields()},handleRemove:function(e,t){for(var o in this.upload.thumbs)if(e.uid===this.upload.thumbs[o].uid){this.upload.thumbs.splice(o,1);break}},handleSuccess:function(e,t,o){this.upload.thumbs.push({uid:t.uid,url:t.url,fid:e.data.data.file._id})},handleRemove1:function(e,t){for(var o in this.upload.category)if(e.uid===this.upload.category[o].uid){this.upload.category.splice(o,1);break}},handleSuccess1:function(e,t,o){this.upload.category.push({uid:t.uid,url:t.url,fid:e.data.data.file._id})}}}},465:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{list:[]}},mounted:function(){this.getList()},methods:{handleClick:function(e,t){var o=this;o.$http.post("/api/product/delete",{id:e}).then(function(e){o.list.splice(t,1),o.$message(e.data.data.info)})},getList:function(){var e=this;e.$http.get("/api/product/list").then(function(t){e.list=t.data.data.data})}}}}});
//# sourceMappingURL=2.6563042.js.map